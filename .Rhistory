else{
gene_identity=identifiers
}
node_url <- c("https://string-db.org/api/tsv/network?identifiers=",gene_identity,"&","species=",species,"&",
"required_score=",required_score,"&","network_type=",network_type,"&","add_nodes=",add_nodes,"&",
"show_query_node_labels=",show_query_node_labels,"&","caller_identity=",caller_identity)
node_url <- cat(node_url,sep = "")
node_file <- download.file(node_url,destfile = "nodes.tsv")
return(node_file)
}
get_nodes(c("TP53","EGFR","CDK2"))
?paste
library("devtools")
library("STRINGdb")
get_nodes <- function(identifiers,species=9606,required_score=400,network_type="functional",add_nodes=10,show_query_node_labels=0,caller_identity="Anonymous"){
if(length(identifiers)>1){
gene_identity <- paste(identifiers,sep="",collapse = "%0d")
}
else{
gene_identity=identifiers
}
node_url <- c("https://string-db.org/api/tsv/network?identifiers=",gene_identity,"&","species=",species,"&",
"required_score=",required_score,"&","network_type=",network_type,"&","add_nodes=",add_nodes,"&",
"show_query_node_labels=",show_query_node_labels,"&","caller_identity=",caller_identity)
node_url <- cat(node_url,sep = "")
node_file <- download.file(node_url,destfile = "nodes.tsv")
return(node_file)
}
get_nodes(c("TP53","EGFR","CDK2"))
?
download.file
download.file("https://string-db.org/api/tsv/network?identifiers=TP53%0dEGFR%0dCDK2&species=9606&required_score=400&network_type=functional&add_nodes=10&show_query_node_labels=0&caller_identity=Anonymous",destfile = "nodes.tsv")
get_nodes <- function(identifiers,species=9606,required_score=400,network_type="functional",add_nodes=10,show_query_node_labels=0,caller_identity="Anonymous"){
if(length(identifiers)>1){
gene_identity <- paste(identifiers,sep="",collapse = "%0d")
}
else{
gene_identity=identifiers
}
node_url <- c("https://string-db.org/api/tsv/network?identifiers=",gene_identity,"&","species=",species,"&",
"required_score=",required_score,"&","network_type=",network_type,"&","add_nodes=",add_nodes,"&",
"show_query_node_labels=",show_query_node_labels,"&","caller_identity=",caller_identity)
node_url <- cat(node_url,sep = "")
print(node_url)
node_file <- download.file(node_url,destfile = "nodes.tsv")
return(node_file)
}
get_nodes(c("TP53","EGFR","CDK2"))
get_nodes <- function(identifiers,species=9606,required_score=400,network_type="functional",add_nodes=10,show_query_node_labels=0,caller_identity="Anonymous"){
if(length(identifiers)>1){
gene_identity <- paste(identifiers,sep="",collapse = "%0d")
}
else{
gene_identity=identifiers
}
node_url <- c("https://string-db.org/api/tsv/network?identifiers=",gene_identity,"&","species=",species,"&",
"required_score=",required_score,"&","network_type=",network_type,"&","add_nodes=",add_nodes,"&",
"show_query_node_labels=",show_query_node_labels,"&","caller_identity=",caller_identity)
node_url <- cat(node_url,sep = "")
print(node_url)
str(node_url)
node_file <- download.file(node_url,destfile = "nodes.tsv")
return(node_file)
}
get_nodes(c("TP53","EGFR","CDK2"))
get_nodes <- function(identifiers,species=9606,required_score=400,network_type="functional",add_nodes=10,show_query_node_labels=0,caller_identity="Anonymous"){
if(length(identifiers)>1){
gene_identity <- paste(identifiers,sep="",collapse = "%0d")
}
else{
gene_identity=identifiers
}
node_url <- c("https://string-db.org/api/tsv/network?identifiers=",gene_identity,"&","species=",species,"&",
"required_score=",required_score,"&","network_type=",network_type,"&","add_nodes=",add_nodes,"&",
"show_query_node_labels=",show_query_node_labels,"&","caller_identity=",caller_identity)
node_url <- cat(node_url,sep = "")
node_file <- download.file(as.character(node_url),destfile = "nodes.tsv")
return(node_file)
}
get_nodes(c("TP53","EGFR","CDK2"))
get_nodes <- function(identifiers,species=9606,required_score=400,network_type="functional",add_nodes=10,show_query_node_labels=0,caller_identity="Anonymous"){
if(length(identifiers)>1){
gene_identity <- paste(identifiers,sep="",collapse = "%0d")
}
else{
gene_identity=identifiers
}
node_url <- c("https://string-db.org/api/tsv/network?identifiers=",gene_identity,"&","species=",species,"&",
"required_score=",required_score,"&","network_type=",network_type,"&","add_nodes=",add_nodes,"&",
"show_query_node_labels=",show_query_node_labels,"&","caller_identity=",caller_identity)
node_url <- cat(node_url,sep = "")
str(as.character(node_url))
node_file <- download.file(as.character(node_url),destfile = "nodes.tsv")
return(node_file)
}
get_nodes(c("TP53","EGFR","CDK2"))
get_nodes <- function(identifiers,species=9606,required_score=400,network_type="functional",add_nodes=10,show_query_node_labels=0,caller_identity="Anonymous"){
if(length(identifiers)>1){
gene_identity <- paste(identifiers,sep="",collapse = "%0d")
}
else{
gene_identity=identifiers
}
node_url <- c("https://string-db.org/api/tsv/network?identifiers=",gene_identity,"&","species=",species,"&",
"required_score=",required_score,"&","network_type=",network_type,"&","add_nodes=",add_nodes,"&",
"show_query_node_labels=",show_query_node_labels,"&","caller_identity=",caller_identity)
node_url <- paste(node_url,sep = "")
node_file <- download.file(as.character(node_url),destfile = "nodes.tsv")
return(node_file)
}
get_nodes(c("TP53","EGFR","CDK2"))
get_nodes <- function(identifiers,species=9606,required_score=400,network_type="functional",add_nodes=10,show_query_node_labels=0,caller_identity="Anonymous"){
if(length(identifiers)>1){
gene_identity <- paste(identifiers,sep="",collapse = "%0d")
}
else{
gene_identity=identifiers
}
node_url <- c("https://string-db.org/api/tsv/network?identifiers=",gene_identity,"&","species=",species,"&",
"required_score=",required_score,"&","network_type=",network_type,"&","add_nodes=",add_nodes,"&",
"show_query_node_labels=",show_query_node_labels,"&","caller_identity=",caller_identity)
node_url <- paste(node_url,sep = "",collapse = "")
node_file <- download.file(node_url,destfile = "nodes.tsv")
return(node_file)
}
get_nodes(c("TP53","EGFR","CDK2"))
get_nodes <- function(identifiers,species=9606,required_score=400,network_type="functional",add_nodes=10,show_query_node_labels=0,caller_identity="Anonymous"){
if(length(identifiers)>1){
gene_identity <- paste(identifiers,sep="",collapse = "%0d")
}
else{
gene_identity=identifiers
}
node_url <- c("https://string-db.org/api/tsv/network?identifiers=",gene_identity,"&","species=",species,"&",
"required_score=",required_score,"&","network_type=",network_type,"&","add_nodes=",add_nodes,"&",
"show_query_node_labels=",show_query_node_labels,"&","caller_identity=",caller_identity)
node_url <- paste(node_url,sep = "",collapse = "")
download.file(node_url,destfile = "nodes.tsv")
node_file <- read.csv("nodes.tsv")
return(node_file)
}
node <- get_nodes(c("TP53","EGFR","CDK2"))
get_nodes <- function(identifiers,species=9606,required_score=400,network_type="functional",add_nodes=10,show_query_node_labels=0,caller_identity="Anonymous"){
if(length(identifiers)>1){
gene_identity <- paste(identifiers,sep="",collapse = "%0d")
}
else{
gene_identity=identifiers
}
node_url <- c("https://string-db.org/api/tsv/network?identifiers=",gene_identity,"&","species=",species,"&",
"required_score=",required_score,"&","network_type=",network_type,"&","add_nodes=",add_nodes,"&",
"show_query_node_labels=",show_query_node_labels,"&","caller_identity=",caller_identity)
node_url <- paste(node_url,sep = "",collapse = "")
download.file(node_url,destfile = "nodes.tsv")
node_file <- read.csv("nodes.tsv",sep = "\t")
return(node_file)
}
node <- get_nodes(c("TP53","EGFR","CDK2"))
View(node)
_
get_nodes <- function(identifiers,species=9606,required_score=400,network_type="functional",add_nodes=10,show_query_node_labels=0,caller_identity="Anonymous"){
if(length(identifiers)>1){
gene_identity <- paste(identifiers,sep="",collapse = "%0d")
}
else{
gene_identity=identifiers
}
node_url <- c("https://string-db.org/api/tsv/network?identifiers=",gene_identity,"&","species=",species,"&",
"required_score=",required_score,"&","network_type=",network_type,"&","add_nodes=",add_nodes,"&",
"show_query_node_labels=",show_query_node_labels,"&","caller_identity=",caller_identity)
node_url <- paste(node_url,sep = "",collapse = "")
download.file(node_url,destfile = "nodes.tsv")
node_file <- read.csv("nodes.tsv",sep = "\t")[c(3,4),]
return(node_file)
}
node <- get_nodes(c("TP53","EGFR","CDK2"))
get_nodes <- function(identifiers,species=9606,required_score=400,network_type="functional",add_nodes=10,show_query_node_labels=0,caller_identity="Anonymous"){
if(length(identifiers)>1){
gene_identity <- paste(identifiers,sep="",collapse = "%0d")
}
else{
gene_identity=identifiers
}
node_url <- c("https://string-db.org/api/tsv/network?identifiers=",gene_identity,"&","species=",species,"&",
"required_score=",required_score,"&","network_type=",network_type,"&","add_nodes=",add_nodes,"&",
"show_query_node_labels=",show_query_node_labels,"&","caller_identity=",caller_identity)
node_url <- paste(node_url,sep = "",collapse = "")
download.file(node_url,destfile = "nodes.tsv")
node_file <- read.csv("nodes.tsv",sep = "\t")[,c(3,4)]
return(node_file)
}
node <- get_nodes(c("TP53","EGFR","CDK2"))
?distinct
??distinct
duplicated(node)
get_nodes <- function(identifiers,species=9606,required_score=400,network_type="functional",add_nodes=10,show_query_node_labels=0,caller_identity="Anonymous"){
if(length(identifiers)>1){
gene_identity <- paste(identifiers,sep="",collapse = "%0d")
}
else{
gene_identity=identifiers
}
node_url <- c("https://string-db.org/api/tsv/network?identifiers=",gene_identity,"&","species=",species,"&",
"required_score=",required_score,"&","network_type=",network_type,"&","add_nodes=",add_nodes,"&",
"show_query_node_labels=",show_query_node_labels,"&","caller_identity=",caller_identity)
node_url <- paste(node_url,sep = "",collapse = "")
download.file(node_url,destfile = "nodes.tsv")
node_file <- read.csv("nodes.tsv",sep = "\t")[,c(3,4)]
node_file <- node_file[duplicated(node_file),]
return(node_file)
}
node <- get_nodes(c("TP53","EGFR","CDK2"))
duplicated(node_file)
duplicated(node)
rownames(node)
colnames(node)
get_nodes <- function(identifiers,species=9606,required_score=400,network_type="functional",add_nodes=10,show_query_node_labels=0,caller_identity="Anonymous"){
if(length(identifiers)>1){
gene_identity <- paste(identifiers,sep="",collapse = "%0d")
}
else{
gene_identity=identifiers
}
node_url <- c("https://string-db.org/api/tsv/network?identifiers=",gene_identity,"&","species=",species,"&",
"required_score=",required_score,"&","network_type=",network_type,"&","add_nodes=",add_nodes,"&",
"show_query_node_labels=",show_query_node_labels,"&","caller_identity=",caller_identity)
node_url <- paste(node_url,sep = "",collapse = "")
download.file(node_url,destfile = "nodes.tsv")
node_file <- read.csv("nodes.tsv",sep = "\t")[,c(3,4)]
node_file <- node_file[duplicated(node_file),]
colnames(node_file) <- c("ligand","receptor")
node_file$interaction_name <- paste0(node_file$ligand,"-",node_file$receptor)
return(node_file)
}
node <- get_nodes(c("TP53","EGFR","CDK2"))
get_nodes <- function(identifiers,species=9606,required_score=400,network_type="functional",add_nodes=100,show_query_node_labels=0,caller_identity="Anonymous"){
if(length(identifiers)>1){
gene_identity <- paste(identifiers,sep="",collapse = "%0d")
}
else{
gene_identity=identifiers
}
node_url <- c("https://string-db.org/api/tsv/network?identifiers=",gene_identity,"&","species=",species,"&",
"required_score=",required_score,"&","network_type=",network_type,"&","add_nodes=",add_nodes,"&",
"show_query_node_labels=",show_query_node_labels,"&","caller_identity=",caller_identity)
node_url <- paste(node_url,sep = "",collapse = "")
download.file(node_url,destfile = "nodes.tsv")
node_file <- read.csv("nodes.tsv",sep = "\t")[,c(3,4)]
node_file <- node_file[duplicated(node_file),]
colnames(node_file) <- c("ligand","receptor")
node_file$interaction_name <- paste0(node_file$ligand,"-",node_file$receptor)
return(node_file)
}
node <- get_nodes(c("TP53","EGFR","CDK2"))
??updateCellChatDB
get_nodes <- function(identifiers,species=9606,required_score=400,network_type="functional",add_nodes=100,show_query_node_labels=0,caller_identity="Anonymous"){
if(length(identifiers)>1){
gene_identity <- paste(identifiers,sep="",collapse = "%0d")
}
else{
gene_identity=identifiers
}
node_url <- c("https://string-db.org/api/tsv/network?identifiers=",gene_identity,"&","species=",species,"&",
"required_score=",required_score,"&","network_type=",network_type,"&","add_nodes=",add_nodes,"&",
"show_query_node_labels=",show_query_node_labels,"&","caller_identity=",caller_identity)
node_url <- paste(node_url,sep = "",collapse = "")
download.file(node_url,destfile = "nodes.tsv")
node_file <- read.csv("nodes.tsv",sep = "\t")[,c(3,4)]
node_file <- node_file[duplicated(node_file),]
colnames(node_file) <- c("ligand","receptor")
node_file$interaction_name <- paste0(node_file$ligand,"-",node_file$receptor)
return(node_file)
}
node <- get_nodes(c("TP53","EGFR","CDK2"))
make_cellchatdb <- function(interaction_nodes){
geneinfo <- unique(c(interaction_nodes$ligand,interaction_nodes&receptor))
return(updateCellChatDB(interaction_nodes,
gene_info = geneinfo,
other_info = NULL,
merged = FALSE,
species_target = NULL
))
}
db <- make_cellchatdb(node)
geneinfo <- unique(c(node$ligand,node&receptor))
get_nodes <- function(identifiers,species=9606,required_score=400,network_type="functional",add_nodes=100,show_query_node_labels=0,caller_identity="Anonymous"){
if(length(identifiers)>1){
gene_identity <- paste(identifiers,sep="",collapse = "%0d")
}
else{
gene_identity=identifiers
}
node_url <- c("https://string-db.org/api/tsv/network?identifiers=",gene_identity,"&","species=",species,"&",
"required_score=",required_score,"&","network_type=",network_type,"&","add_nodes=",add_nodes,"&",
"show_query_node_labels=",show_query_node_labels,"&","caller_identity=",caller_identity)
node_url <- paste(node_url,sep = "",collapse = "")
download.file(node_url,destfile = "nodes.tsv")
node_file <- read.csv("nodes.tsv",sep = "\t")[,c(3,4)]
node_file <- node_file[duplicated(node_file),]
colnames(node_file) <- c("ligand","receptor")
node_file$interaction_name <- paste0(node_file$ligand,"-",node_file$receptor)
return(node_file)
}
node <- get_nodes(c("TP53","EGFR","CDK2"))
node$receptor
c(node$ligand,node$receptor)
unique(c(node$ligand,node$receptor))
get_nodes <- function(identifiers,species=9606,required_score=400,network_type="functional",add_nodes=100,show_query_node_labels=0,caller_identity="Anonymous"){
if(length(identifiers)>1){
gene_identity <- paste(identifiers,sep="",collapse = "%0d")
}
else{
gene_identity=identifiers
}
node_url <- c("https://string-db.org/api/tsv/network?identifiers=",gene_identity,"&","species=",species,"&",
"required_score=",required_score,"&","network_type=",network_type,"&","add_nodes=",add_nodes,"&",
"show_query_node_labels=",show_query_node_labels,"&","caller_identity=",caller_identity)
node_url <- paste(node_url,sep = "",collapse = "")
download.file(node_url,destfile = "nodes.tsv")
node_file <- read.csv("nodes.tsv",sep = "\t")[,c(3,4)]
node_file <- node_file[duplicated(node_file),]
colnames(node_file) <- c("ligand","receptor")
node_file$interaction_name <- paste0(node_file$ligand,"-",node_file$receptor)
return(node_file)
}
node <- get_nodes(c("TP53","EGFR","CDK2"))
make_cellchatdb <- function(interaction_nodes){
geneinfo <- unique(c(interaction_nodes$ligand,interaction_nodes$receptor))
return(updateCellChatDB(interaction_nodes,
gene_info = geneinfo,
other_info = NULL,
merged = FALSE,
species_target = NULL
))
}
db <- make_cellchatdb(node)
library(CellChat)
db <- make_cellchatdb(node)
geneinfo <- unique(c(node$ligand,node$receptor))
colnames(geneinfo)
rownames(geneinfo)
make_cellchatdb <- function(interaction_nodes){
geneinfo$Symbol <- unique(c(interaction_nodes$ligand,interaction_nodes$receptor))
return(updateCellChatDB(interaction_nodes,
gene_info = geneinfo,
other_info = NULL,
merged = FALSE,
species_target = NULL
))
}
db <- make_cellchatdb(node)
make_cellchatdb <- function(interaction_nodes){
geneinfo <- as.data.frame(unique(c(interaction_nodes$ligand,interaction_nodes$receptor)))
colnames(geneinfo) <- "Symbol"
return(updateCellChatDB(interaction_nodes,
gene_info = geneinfo,
other_info = NULL,
merged = FALSE,
species_target = NULL
))
}
db <- make_cellchatdb(node)
get_nodes <- function(identifiers,species=9606,required_score=400,network_type="functional",add_nodes=100,show_query_node_labels=0,caller_identity="Anonymous"){
if(length(identifiers)>1){
gene_identity <- paste(identifiers,sep="",collapse = "%0d")
}
else{
gene_identity=identifiers
}
node_url <- c("https://string-db.org/api/tsv/network?identifiers=",gene_identity,"&","species=",species,"&",
"required_score=",required_score,"&","network_type=",network_type,"&","add_nodes=",add_nodes,"&",
"show_query_node_labels=",show_query_node_labels,"&","caller_identity=",caller_identity)
node_url <- paste(node_url,sep = "",collapse = "")
download.file(node_url,destfile = "nodes.tsv")
node_file <- read.csv("nodes.tsv",sep = "\t")[,c(3,4)]
node_file <- node_file[duplicated(node_file),]
colnames(node_file) <- c("ligand","receptor")
node_file$interaction_name <- paste0(node_file$ligand,"-",node_file$receptor)
node_file$pathway_name <- node_file$ligand
return(node_file)
}
node <- get_nodes(c("TP53","EGFR","CDK2"))
make_cellchatdb <- function(interaction_nodes){
geneinfo <- as.data.frame(unique(c(interaction_nodes$ligand,interaction_nodes$receptor)))
colnames(geneinfo) <- "Symbol"
return(updateCellChatDB(interaction_nodes,
gene_info = geneinfo,
other_info = NULL,
merged = FALSE,
species_target = NULL
))
}
db <- make_cellchatdb(node)
load_all()
get_nodes("gabrd",species=310571)
load_all()
load_all()
get_nodes("gabrd",species=310571)
get_nodes <- function(identifiers,species=9606,required_score=400,network_type="functional",add_nodes=100,show_query_node_labels=0,caller_identity="Anonymous"){
if(length(identifiers)>1){
gene_identity <- paste(identifiers,sep="",collapse = "%0d")
}
else{
gene_identity=identifiers
}
node_url <- c("https://string-db.org/api/tsv/network?identifiers=",gene_identity,"&","species=",species,"&",
"required_score=",required_score,"&","network_type=",network_type,"&","add_nodes=",add_nodes,"&",
"show_query_node_labels=",show_query_node_labels,"&","caller_identity=",caller_identity)
node_url <- paste(node_url,sep = "",collapse = "")
download.file(node_url,destfile = "nodes.tsv")
node_file <- read.csv("nodes.tsv",sep = "\t")[,c(3,4)]
node_file <- node_file[duplicated(node_file),]
colnames(node_file) <- c("ligand","receptor")
node_file$interaction_name <- paste0(node_file$ligand,"-",node_file$receptor)
node_file$pathway_name <- node_file$ligand
return(node_file)
}
get_nodes("gabrd",species=310571)
library(STRINGdb)
get_nodes <- function(identifiers,species=9606,required_score=400,network_type="functional",add_nodes=100,show_query_node_labels=0,caller_identity="Anonymous"){
if(length(identifiers)>1){
gene_identity <- paste(identifiers,sep="",collapse = "%0d")
}
else{
gene_identity=identifiers
}
node_url <- c("https://string-db.org/api/tsv/network?identifiers=",gene_identity,"&","species=",species,"&",
"required_score=",required_score,"&","network_type=",network_type,"&","add_nodes=",add_nodes,"&",
"show_query_node_labels=",show_query_node_labels,"&","caller_identity=",caller_identity)
node_url <- paste(node_url,sep = "",collapse = "")
download.file(node_url,destfile = "nodes.tsv")
node_file <- read.csv("nodes.tsv",sep = "\t")[,c(3,4)]
node_file <- node_file[duplicated(node_file),]
colnames(node_file) <- c("ligand","receptor")
node_file$interaction_name <- paste0(node_file$ligand,"-",node_file$receptor)
node_file$pathway_name <- node_file$ligand
return(node_file)
}
library(devtools)
make_cellchatdb <- function(interaction_nodes,enrich=NULL){
if (is.null(enrich)){}
else {interaction_nodes$evidence=enrich}
geneinfo <- as.data.frame(unique(c(interaction_nodes$ligand,interaction_nodes$receptor)))
colnames(geneinfo) <- "Symbol"
return(updateCellChatDB(interaction_nodes,
gene_info = geneinfo,
other_info = NULL,
merged = FALSE,
species_target = NULL))
}
get_nodes(c("CDK2","TP53","CD43"))
node <- get_nodes(c("CDK2","TP53","CD43"))
make_cellchatdb(node)
db <- make_cellchatdb(node)
use-git()
library(devtools)
use_git()
use_git()
use_git()
use_r("down_gtf.R")
use_r("get_nodes.R")
use_r("make_cellchatdb.R")
use_r("make_customdb.R")
use_package("rtracklayer")
use_package("rtracklayer")
use_package("CellChat")
use_package("STRINGdb")
document()
load_all()
check()
library(devtools)
load_all()
check()
down_gtf()
check()
?download.file
?unzip
?read.csv
use_package("utils")
check()
?use_package
?usethis
??usethis
use_package("STRINGdb",type ="LinkingTo")
check()
document()
DESCRIPTION
DESCRIPTION()
use_mit_license()
document()
?down_gtf
document()
?down_gtf
down_gtf(GCF_000001405.40)
?down_gtf
document()
document()
?make_cellchatdb
document()
?make_cellchatdb
document()
document()
document()
?get_nodes()
check()
check()
check()
install()
install()
??tocelldb
?tocelldb
check()
